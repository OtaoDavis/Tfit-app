(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{10:(e,t,a)=>{"use strict";a.d(t,{$v:()=>h,EO:()=>u,Lt:()=>o,Rx:()=>g,Zr:()=>y,ck:()=>x,r7:()=>p,tv:()=>d,wd:()=>f});var s=a(5155),r=a(2115),l=a(7649),i=a(9434),n=a(285);let o=l.bL,d=l.l9,c=l.ZL,m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});m.displayName=l.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(l.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});u.displayName=l.UC.displayName;let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};f.displayName="AlertDialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="AlertDialogFooter";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold",a),...r})});p.displayName=l.hE.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});h.displayName=l.VY.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.rc,{ref:t,className:(0,i.cn)((0,n.r)(),a),...r})});g.displayName=l.rc.displayName;let y=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.ZD,{ref:t,className:(0,i.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});y.displayName=l.ZD.displayName},285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>o});var s=a(5155),r=a(2115),l=a(9708),i=a(2085),n=a(9434);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:d=!1,...c}=e,m=d?l.DX:"button";return(0,s.jsx)(m,{className:(0,n.cn)(o({variant:r,size:i,className:a})),ref:t,...c})});d.displayName="Button"},2346:(e,t,a)=>{"use strict";a.d(t,{w:()=>n});var s=a(5155),r=a(2115),l=a(7489),i=a(9434);let n=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:n=!0,...o}=e;return(0,s.jsx)(l.b,{ref:t,decorative:n,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...o})});n.displayName=l.b.displayName},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(5155),r=a(2115),l=a(9434);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},2881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var s=a(5155),r=a(2115),l=a(3803),i=a(6766),n=a(285),o=a(6695);async function d(e,t,a){if(await new Promise(e=>setTimeout(e,1500)),.05>Math.random())throw Error("Mock scan failed: Unable to analyze image.");return{name:"Scanned ".concat(t),mealType:t,calories:Math.floor(400*Math.random())+100,protein:Math.floor(30*Math.random())+5,carbohydrates:Math.floor(50*Math.random())+10,fat:Math.floor(20*Math.random())+5,notes:a}}var c=a(4301),m=a(172),u=a(7933),f=a(6923),x=a(1133),p=a(7223),h=a(7381),g=a(9556),y=a(1920),j=a(5365),v=a(7600),N=a(7481),b=a(2346),w=a(4636),S=a(5511),M=a(644),k=a(9340),C=a(9328),A=a(5927),T=a(6267),D=a(1047),_=a(4165),E=a(10),I=a(9434),P=a(8539),L=a(5057);let R="mealScannerTrialUsed_v1",F="mealDiary_v4_structured",O=["Breakfast","Morning Snack","Lunch","Afternoon Snack","Dinner","Evening Snack"];function z(e){let{isHistoryVisible:t,onToggleHistory:a}=e,{user:l}=(0,v.A)(),{toast:z}=(0,N.dj)(),[U,G]=(0,r.useState)([]),[H,$]=(0,r.useState)(!0),[Z,V]=(0,r.useState)(!1),[J,W]=(0,r.useState)(!1),[K,Y]=(0,r.useState)(null),[B,q]=(0,r.useState)(null),[X,Q]=(0,r.useState)((0,M.o)(new Date)),[ee,et]=(0,r.useState)(""),[ea,es]=(0,r.useState)(!1),[er,el]=(0,r.useState)(null),ei=async e=>{if(!T.Ii.isNativePlatform()||!e.startsWith("data:image"))return e;try{let t="meal_".concat(new Date().getTime(),".jpeg"),a=e.split(",")[1],s=await D.YA.writeFile({path:t,data:a,directory:D.__.Data});return T.Ii.convertFileSrc(s.uri)}catch(e){return console.error("Unable to save image to device",e),z({title:"Save Error",description:"Could not save image to device.",variant:"destructive"}),null}};(0,r.useEffect)(()=>{{$(!localStorage.getItem(R));let e=localStorage.getItem(F);if(e)try{let t=JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp)}));G(t)}catch(e){console.error("Failed to parse meal diary",e),G([])}}},[]),(0,r.useEffect)(()=>{try{U.length>0?localStorage.setItem(F,JSON.stringify(U)):localStorage.removeItem(F)}catch(e){console.error("Error saving meal diary:",e),z({title:"Diary Save Error",description:"Could not save meal diary updates.",variant:"destructive"})}},[U,z]);let en=async()=>{if(!T.Ii.isPluginAvailable("Camera"))return!0;try{let e=await A.i7.checkPermissions();if(("granted"!==e.camera||"granted"!==e.photos)&&(e=await A.i7.requestPermissions()),"denied"===e.camera||"denied"===e.photos)return z({variant:"destructive",title:"Permission Denied",description:"Camera and gallery access is required. Please enable it in settings."}),!1;return!0}catch(e){return z({variant:"destructive",title:"Permission Error",description:"Could not request permissions: ".concat(e.message)}),!1}},eo=async e=>{if(!T.Ii.isPluginAvailable("Camera")){z({variant:"destructive",title:"Not Supported",description:"Camera/Gallery is not available on this device."});return}if(K){if(!l&&!H){z({title:"Login Required",description:"Your free trial is used. Please log in to scan more meals."});return}if(await en())try{let t=await A.i7.getPhoto({quality:90,allowEditing:!1,resultType:A.LK.DataUrl,source:e});if(t.dataUrl){es(!0),el(null);let e=await ei(t.dataUrl),a={...await d(t.dataUrl,K,ee),imageFileUri:e,timestamp:new Date};G(e=>[...e.filter(e=>!((0,k.r)(e.timestamp,new Date)&&e.mealType===a.mealType)),a]),l?z({title:"Scan Successful!",description:"".concat(a.mealType," has been added to your diary.")}):(localStorage.setItem(R,"true"),$(!1),z({title:"Trial Scan Successful!",description:"Logged to your diary. Log in for unlimited scans."})),em()}}catch(e){var t;(null===(t=e.message)||void 0===t?void 0:t.toLowerCase().includes("cancelled"))||el("Failed to scan meal: ".concat(e.message||"An unknown error occurred")),es(!1)}}},ed=(e,t,a)=>{if(t)q(t),W(!0);else if(a){if(!l&&!H){z({title:"Login to Log Meal",description:"You have used your free trial. Please log in to continue."});return}Y(e),V(!0)}},ec=e=>{G(t=>t.filter(t=>t.timestamp.getTime()!==e.timestamp.getTime()||t.mealType!==e.mealType)),z({title:"Meal Deleted",description:"".concat(e.name," has been removed from your diary."),variant:"default"}),em()},em=()=>{V(!1),W(!1),el(null),es(!1),Y(null),q(null),et("")},eu=e=>{let{forDate:t}=e,a=U.filter(e=>(0,k.r)(e.timestamp,t)),r=(0,k.r)(t,(0,M.o)(new Date));return(0,s.jsx)(o.Zp,{className:"shadow-lg w-full",children:(0,s.jsx)(o.Wu,{className:"p-2 sm:p-4",children:(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:O.map(e=>{let t=a.find(t=>t.mealType===e);return(0,s.jsxs)("div",{className:(0,I.cn)("overflow-hidden rounded-lg shadow-md flex flex-col justify-between items-center text-center transition-transform transform hover:scale-105 relative aspect-[4/5] sm:aspect-square group",t?"bg-card":"bg-muted/50",r&&!t||t?"cursor-pointer":"cursor-not-allowed opacity-60"),onClick:()=>ed(e,t,r),children:[(null==t?void 0:t.imageFileUri)&&(0,s.jsx)(i.default,{src:t.imageFileUri,alt:t.name,layout:"fill",objectFit:"cover",unoptimized:T.Ii.isNativePlatform(),"data-ai-hint":"food meal"}),(0,s.jsxs)("div",{className:(0,I.cn)("absolute inset-0 flex flex-col items-start justify-between p-2 sm:p-3",(null==t?void 0:t.imageFileUri)?"bg-black/40 text-white":"items-center justify-center"),children:[(0,s.jsx)("p",{className:(0,I.cn)("text-sm font-semibold",(null==t?void 0:t.imageFileUri)?"self-start":"self-center absolute top-2"),children:e}),t?(0,s.jsxs)("div",{className:"w-full text-center self-center",children:[t.notes&&(0,s.jsxs)("p",{className:"text-xs italic mb-1 line-clamp-2",children:['"',t.notes,'"']}),(0,s.jsx)("p",{className:"text-xs text-white/80 mt-1 self-end w-full text-right",children:(0,C.GP)(new Date(t.timestamp),"h:mm a")})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center flex-grow",children:[(0,s.jsx)(c.A,{className:"h-8 w-8 text-muted-foreground group-hover:text-primary"}),(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground mt-2 sr-only sm:not-sr-only",children:r?"Log ".concat(e):"Not Logged"})]})]})]},e)})})})})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-foreground",children:"Meal Diary"}),(0,s.jsx)(eu,{forDate:(0,M.o)(new Date)}),(0,s.jsx)(_.lG,{open:Z,onOpenChange:e=>!e&&em(),children:(0,s.jsxs)(_.Cf,{children:[(0,s.jsxs)(_.c7,{children:[(0,s.jsxs)(_.L3,{children:["Log ",K]}),(0,s.jsx)(_.rr,{children:ea?"Scanning your meal...":"Add a photo of your ".concat(null==K?void 0:K.toLowerCase()," and any notes.")})]}),ea?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-center text-muted-foreground p-8 space-y-2",children:[(0,s.jsx)(m.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,s.jsx)("p",{className:"font-semibold",children:"Adding your Meal..."}),(0,s.jsx)("p",{className:"text-sm",children:"This may take a moment."})]}):(0,s.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L.J,{htmlFor:"meal-notes",children:"Notes (Optional)"}),(0,s.jsx)(P.T,{id:"meal-notes",placeholder:"enter your note here e.g., meal name",value:ee,onChange:e=>et(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)(n.$,{onClick:()=>eo(A.ru.Camera),variant:"outline",className:"h-20 text-base flex-col gap-1",children:[(0,s.jsx)(u.A,{className:"h-6 w-6"})," Take Photo"]}),(0,s.jsxs)(n.$,{onClick:()=>eo(A.ru.Photos),variant:"outline",className:"h-20 text-base flex-col gap-1",children:[(0,s.jsx)(f.A,{className:"h-6 w-6"})," Upload"]})]}),er&&(0,s.jsxs)(j.Fc,{variant:"destructive",className:"mt-4",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),(0,s.jsx)(j.XL,{children:"Error"}),(0,s.jsx)(j.TN,{children:er})]})]}),(0,s.jsx)(_.Es,{className:"mt-4",children:(0,s.jsx)(n.$,{variant:"ghost",onClick:em,children:"Cancel"})})]})}),(0,s.jsx)(_.lG,{open:J,onOpenChange:e=>!e&&em(),children:(0,s.jsxs)(_.Cf,{children:[(0,s.jsx)(_.c7,{children:(0,s.jsx)(_.L3,{children:"Meal Details"})}),B&&(0,s.jsx)(e=>{let{meal:t}=e;return(0,s.jsxs)("div",{className:"space-y-4",children:[t.imageFileUri&&(0,s.jsx)("div",{className:"relative aspect-video w-full rounded-md overflow-hidden border",children:(0,s.jsx)(i.default,{src:t.imageFileUri,alt:t.name,layout:"fill",objectFit:"cover","data-ai-hint":"food meal",unoptimized:T.Ii.isNativePlatform()})}),(0,s.jsxs)("div",{className:"p-4 bg-muted/50 rounded-lg space-y-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-primary",children:t.name}),t.notes&&(0,s.jsxs)("div",{children:[(0,s.jsx)(L.J,{className:"text-sm font-medium",children:"Your Notes"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground italic mt-1 p-2 bg-background rounded-md",children:['"',t.notes,'"']})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground pt-1",children:["Logged as ",t.mealType," at ",(0,C.GP)(new Date(t.timestamp),"MMM d, yyyy h:mm a")]}),(0,s.jsx)(b.w,{})]})]})},{meal:B}),(0,s.jsxs)(_.Es,{className:"sm:justify-between mt-4",children:[B&&(0,s.jsxs)(E.Lt,{children:[(0,s.jsx)(E.tv,{asChild:!0,children:(0,s.jsxs)(n.$,{variant:"destructive",children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4"})," Delete Meal"]})}),(0,s.jsxs)(E.EO,{children:[(0,s.jsxs)(E.wd,{children:[(0,s.jsx)(E.r7,{children:"Are you sure?"}),(0,s.jsx)(E.$v,{children:"This action cannot be undone. This will permanently delete this meal from your diary."})]}),(0,s.jsxs)(E.ck,{children:[(0,s.jsx)(E.Zr,{children:"Cancel"}),(0,s.jsx)(E.Rx,{onClick:()=>ec(B),children:"Yes, delete it"})]})]})]}),(0,s.jsx)(n.$,{variant:"outline",onClick:em,children:"Close"})]})]})}),(0,s.jsx)(b.w,{className:"my-8"}),(0,s.jsxs)("section",{id:"meal-history",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-2xl font-semibold text-foreground",children:"History"}),(0,s.jsxs)(n.$,{variant:"ghost",onClick:a,className:"flex items-center gap-1",children:[t?"Hide History":"View History",t?(0,s.jsx)(h.A,{className:"h-5 w-5"}):(0,s.jsx)(g.A,{className:"h-5 w-5"})]})]}),t&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(w.AM,{children:[(0,s.jsx)(w.Wv,{asChild:!0,children:(0,s.jsxs)(n.$,{variant:"outline",className:(0,I.cn)("w-full sm:w-[280px] justify-start text-left font-normal",!X&&"text-muted-foreground"),children:[(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4"}),X?(0,C.GP)(X,"PPP"):(0,s.jsx)("span",{children:"Pick a date"})]})}),(0,s.jsx)(w.hl,{className:"w-auto p-0",children:(0,s.jsx)(S.V,{mode:"single",selected:X,onSelect:e=>Q(e||(0,M.o)(new Date)),initialFocus:!0})})]}),U.some(e=>(0,k.r)(e.timestamp,X))?(0,s.jsx)(eu,{forDate:X}):(0,s.jsx)(o.Zp,{className:"shadow-md",children:(0,s.jsx)(o.Wu,{className:"pt-6",children:(0,s.jsxs)("p",{className:"text-muted-foreground text-center",children:["No meals logged for ",(0,C.GP)(X,"MMMM d, yyyy"),"."]})})})]})]})]})}var U=a(6404),G=a(5222),H=a(6548),$=a(6438),Z=a(8046),V=a(2523),J=a(4944);let W="waterIntakeLog_v2",K="waterUserPrefGoal_v1";function Y(e){let{isHistoryVisible:t,onToggleHistory:a}=e,[l,i]=(0,r.useState)([]),[d,c]=(0,r.useState)(2e3),[m,u]=(0,r.useState)(!1),[f,x]=(0,r.useState)("250"),[p,j]=(0,r.useState)(d.toString()),[v,N]=(0,r.useState)((0,M.o)(new Date)),b=(0,r.useCallback)(()=>(0,C.GP)((0,M.o)(new Date),"yyyy-MM-dd"),[]);(0,r.useEffect)(()=>{u(!0);let e=localStorage.getItem(W),t=[];if(e)try{t=JSON.parse(e)}catch(e){console.error("Failed to parse water log from localStorage",e)}let a=localStorage.getItem(K),s=2e3;a&&(c(s=JSON.parse(a)),j(s.toString()));let r=b();t.some(e=>e.date===r)||t.push({date:r,intakeMl:0,goalMl:s}),i(t.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()))},[b]),(0,r.useEffect)(()=>{m&&l.length>0&&localStorage.setItem(W,JSON.stringify(l))},[l,m]),(0,r.useEffect)(()=>{m&&(localStorage.setItem(K,JSON.stringify(d)),j(d.toString()))},[d,m]);let A=(0,r.useCallback)(e=>{let t=b();i(a=>{let s=[...a],r=s.findIndex(e=>e.date===t);if(-1!==r){let t=e(s[r].intakeMl);s[r].intakeMl=Math.min(Math.max(0,t),2*s[r].goalMl)}else{let a=e(0);s.push({date:t,intakeMl:Math.min(Math.max(0,a),2*d),goalMl:d})}return s.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())})},[b,d]),T=e=>{A(t=>t+e)},D=e=>{A(t=>t-e)},E=e=>{let t=(0,C.GP)((0,M.o)(e),"yyyy-MM-dd");return l.find(e=>e.date===t)||{date:t,intakeMl:0,goalMl:d}},P=E(new Date),R=E(v),F=P.goalMl>0?P.intakeMl/P.goalMl*100:0,O=P.goalMl/8,z=O>0?Math.floor(P.intakeMl/O):0;return m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-foreground",children:"Water Tracker"}),(0,s.jsxs)(o.Zp,{className:"shadow-lg",children:[(0,s.jsxs)(o.aR,{children:[(0,s.jsxs)(o.ZB,{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(U.A,{className:"h-6 w-6 text-primary"}),"Today's Hydration"]}),(0,s.jsxs)(_.lG,{children:[(0,s.jsx)(_.zM,{asChild:!0,children:(0,s.jsx)(n.$,{variant:"ghost",size:"icon","aria-label":"Edit daily goal",children:(0,s.jsx)(G.A,{className:"h-5 w-5 text-muted-foreground hover:text-primary"})})}),(0,s.jsxs)(_.Cf,{children:[(0,s.jsx)(_.c7,{children:(0,s.jsx)(_.L3,{children:"Set Daily Water Goal"})}),(0,s.jsx)("div",{className:"grid gap-4 py-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(L.J,{htmlFor:"daily-goal",className:"text-right col-span-1",children:"Goal (ml)"}),(0,s.jsx)(V.p,{id:"daily-goal",type:"number",value:p,onChange:e=>j(e.target.value),className:"col-span-3",min:"1"})]})}),(0,s.jsxs)(_.Es,{children:[(0,s.jsx)(_.HM,{asChild:!0,children:(0,s.jsx)(n.$,{type:"button",variant:"outline",children:"Cancel"})}),(0,s.jsx)(_.HM,{asChild:!0,children:(0,s.jsx)(n.$,{type:"submit",onClick:()=>{let e=parseInt(p);if(!isNaN(e)&&e>0){c(e);let t=b();i(a=>{let s=[...a],r=s.findIndex(e=>e.date===t);return -1!==r?s[r].goalMl=e:s.push({date:t,intakeMl:0,goalMl:e}),s.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())})}},children:"Set Goal"})})]})]})]})]}),(0,s.jsxs)(o.BT,{children:[P.intakeMl.toLocaleString()," ml / ",P.goalMl.toLocaleString()," ml (",Math.round(F),"%)"]})]}),(0,s.jsxs)(o.Wu,{className:"flex flex-col items-center space-y-4",children:[(0,s.jsx)("div",{className:"flex justify-center items-center gap-2 flex-wrap","aria-label":"".concat(z," out of ").concat(8," glasses filled"),children:Array.from({length:8}).map((e,t)=>(0,s.jsx)(H.A,{className:(0,I.cn)("h-8 w-8 transition-colors duration-300",t<z?"text-primary":"text-muted-foreground/30")},t))}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 w-full",children:[(0,s.jsxs)(n.$,{onClick:()=>D(250),variant:"outline",size:"default",className:"flex items-center gap-2","aria-label":"Remove ".concat(250,"ml"),disabled:0===P.intakeMl,children:[(0,s.jsx)($.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Glass"})]}),(0,s.jsxs)(n.$,{onClick:()=>T(250),variant:"default",size:"default",className:"flex items-center gap-2","aria-label":"Add ".concat(250,"ml"),children:[(0,s.jsx)(Z.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Glass"})]})]}),(0,s.jsxs)("div",{className:"flex items-end gap-2 w-full max-w-sm mx-auto",children:[(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)(L.J,{htmlFor:"custom-amount",className:"text-sm text-muted-foreground",children:"Custom (ml)"}),(0,s.jsx)(V.p,{id:"custom-amount",type:"number",value:f,onChange:e=>x(e.target.value),min:"1",className:"mt-1 h-9"})]}),(0,s.jsx)(n.$,{onClick:()=>{let e=parseInt(f);!isNaN(e)&&e>0&&T(e)},variant:"secondary",className:"h-9","aria-label":"Add custom amount",children:"Add"})]})]}),(0,s.jsx)(o.wL,{className:"text-xs text-muted-foreground justify-center pt-4",children:(0,s.jsxs)("p",{children:["Goal: ",P.goalMl/1e3," liters"]})})]}),(0,s.jsxs)("section",{id:"water-history",className:"mt-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-2xl font-semibold text-foreground",children:"History"}),(0,s.jsxs)(n.$,{variant:"ghost",onClick:a,className:"flex items-center gap-1",children:[t?"Hide History":"View History",t?(0,s.jsx)(h.A,{className:"h-5 w-5"}):(0,s.jsx)(g.A,{className:"h-5 w-5"})]})]}),t&&(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(w.AM,{children:[(0,s.jsx)(w.Wv,{asChild:!0,children:(0,s.jsxs)(n.$,{variant:"outline",className:(0,I.cn)("w-full sm:w-[280px] justify-start text-left font-normal",!v&&"text-muted-foreground"),children:[(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4"}),v?(0,C.GP)(v,"PPP"):(0,s.jsx)("span",{children:"Pick a date"})]})}),(0,s.jsx)(w.hl,{className:"w-auto p-0",children:(0,s.jsx)(S.V,{mode:"single",selected:v,onSelect:e=>N(e||(0,M.o)(new Date)),initialFocus:!0})})]}),(0,s.jsx)(o.Zp,{className:"shadow-md",children:(0,s.jsx)(o.Wu,{className:"pt-6 text-center",children:R.intakeMl>0||(0,k.r)(v,(0,M.o)(new Date))?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-primary",children:[R.intakeMl.toLocaleString()," ml"]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Goal: ",R.goalMl.toLocaleString()," ml"]}),(0,s.jsx)(J.k,{value:R.intakeMl/R.goalMl*100,className:"w-full h-3 mt-2"})]}):(0,s.jsxs)("p",{className:"text-muted-foreground",children:["No water logged for ",(0,C.GP)(v,"MMMM d, yyyy"),"."]})})})]}),{})]})]}):(0,s.jsxs)(o.Zp,{className:"shadow-lg",children:[(0,s.jsx)(o.aR,{children:(0,s.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(U.A,{className:"h-6 w-6 text-primary"}),"Hydration Status"]})}),(0,s.jsx)(o.Wu,{className:"flex flex-col items-center space-y-4",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading water tracker..."})})]})}function B(){let[e,t]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"container mx-auto",children:[(0,s.jsx)(l.z,{title:"Nutrition Hub",description:"Track your meals and hydration to stay on top of your health goals."}),(0,s.jsxs)("div",{className:"space-y-12",children:[(0,s.jsx)(z,{isHistoryVisible:e,onToggleHistory:()=>t(!e)}),(0,s.jsx)(b.w,{}),(0,s.jsx)(Y,{isHistoryVisible:a,onToggleHistory:()=>i(!a)})]})]})}},3803:(e,t,a)=>{"use strict";a.d(t,{z:()=>r});var s=a(5155);function r(e){let{title:t,description:a,children:r}=e;return(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-foreground sm:text-4xl",children:t}),r&&(0,s.jsx)("div",{className:"ml-4",children:r})]}),a&&(0,s.jsx)("p",{className:"mt-2 text-lg text-muted-foreground",children:a})]})}},4165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>f,Es:()=>p,HM:()=>m,L3:()=>h,c7:()=>x,lG:()=>o,rr:()=>g,zM:()=>d});var s=a(5155),r=a(2115),l=a(5452),i=a(5318),n=a(9434);let o=l.bL,d=l.l9,c=l.ZL,m=l.bm,u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});u.displayName=l.hJ.displayName;let f=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(l.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[r,(0,s.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=l.UC.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};x.displayName="DialogHeader";let p=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};p.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});h.displayName=l.hE.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});g.displayName=l.VY.displayName},4636:(e,t,a)=>{"use strict";a.d(t,{AM:()=>n,Wv:()=>o,hl:()=>d});var s=a(5155),r=a(2115),l=a(547),i=a(9434);let n=l.bL,o=l.l9,d=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:n=4,...o}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsx)(l.UC,{ref:t,align:r,sideOffset:n,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});d.displayName=l.UC.displayName},4800:(e,t,a)=>{Promise.resolve().then(a.bind(a,2881))},4944:(e,t,a)=>{"use strict";a.d(t,{k:()=>n});var s=a(5155),r=a(2115),l=a(5863),i=a(9434);let n=r.forwardRef((e,t)=>{let{className:a,value:r,...n}=e;return(0,s.jsx)(l.bL,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...n,children:(0,s.jsx)(l.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});n.displayName=l.bL.displayName},5057:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var s=a(5155),r=a(2115),l=a(968),i=a(2085),n=a(9434);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.b,{ref:t,className:(0,n.cn)(o(),a),...r})});d.displayName=l.b.displayName},5365:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>o,TN:()=>c,XL:()=>d});var s=a(5155),r=a(2115),l=a(2085),i=a(9434);let n=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=r.forwardRef((e,t)=>{let{className:a,variant:r,...l}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(n({variant:r}),a),...l})});o.displayName="Alert";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});d.displayName="AlertTitle";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",a),...r})});c.displayName="AlertDescription"},5511:(e,t,a)=>{"use strict";a.d(t,{V:()=>d});var s=a(5155);a(2115);var r=a(965),l=a(3158),i=a(9445),n=a(9434),o=a(285);function d(e){let{className:t,classNames:a,showOutsideDays:d=!0,...c}=e;return(0,s.jsx)(i.hv,{showOutsideDays:d,className:(0,n.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,n.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,n.cn)((0,o.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(r.A,{className:(0,n.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(l.A,{className:(0,n.cn)("h-4 w-4",t),...a})}},...c})}d.displayName="Calendar"},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>n,wL:()=>m});var s=a(5155),r=a(2115),l=a(9434);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})});m.displayName="CardFooter"},7039:(e,t,a)=>{"use strict";let s;a.d(t,{j2:()=>o,kA:()=>d});var r=a(3915),l=a(3004),i=a(5317);let n={apiKey:"AIzaSyCKhrN-PXHvg4tKnlhNMOyM5qQL6lTpea8",authDomain:"tfit-app-9a61a.firebaseapp.com",projectId:"tfit-app-9a61a",storageBucket:"tfit-app-9a61a.firebasestorage.app",messagingSenderId:"99502279653",appId:"1:99502279653:web:d0a1419e766bf28b7dbd0c",measurementId:"G-35Z8DKZWVH"};n.apiKey?s=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)(n):(console.error("Firebase API Key is missing. Ensure NEXT_PUBLIC_FIREBASE_API_KEY is set in your .env.local file."),s=(0,r.Wp)({apiKey:"MISSING_KEY_CHECK_ENV"}));let o=(0,l.xI)(s),d=(0,i.aU)(s)},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(2115);let r=0,l=new Map,i=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=n(d,e),o.forEach(e=>{e(d)})}function m(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7600:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>d});var s=a(5155),r=a(2115),l=a(8731),i=a(7039),n=a(172);let o=(0,r.createContext)(void 0);function d(e){let{children:t}=e,[a,r,d]=(0,l.hD)(i.j2);return r&&void 0===a?(0,s.jsx)("div",{className:"flex h-screen w-screen items-center justify-center",children:(0,s.jsx)(n.A,{className:"h-12 w-12 animate-spin text-primary"})}):(0,s.jsx)(o.Provider,{value:{user:a,loading:r,error:d},children:t})}function c(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8539:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var s=a(5155),r=a(2115),l=a(9434);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});i.displayName="Textarea"},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(2596),r=a(9688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,192,942,100,239,397,63,112,343,267,672,722,395,796,441,684,358],()=>t(4800)),_N_E=e.O()}]);